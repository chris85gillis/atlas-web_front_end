<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>

  <meta charset="utf-8" />
  <title>Task 8</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <style>
    .loading {
      opacity: 0.2;
    }
  </style>
  <script type="application/javascript">
    $(document).ready(() => {

      // Function to display loading state
      function displayLoading(loading) {
        const ulElement = $('ul#results');
        if (loading) {
          ulElement.wrap('<div class="loading"></div>');
        } else {
          ulElement.unwrap();
        }
      }

      function addPostRow(data) {
        $('body').append(`<p><span>Post created with id ${data.id}, title: ${data.title}, author: ${data.author}</span></p>`);
      }

      function listPosts() {
        $.ajax({
          url: 'http://localhost:3000/posts',
          method: 'GET',
          dataType: 'json',
          success: function (response) {
            response.forEach(function (post) {
              addPostRow(post);
            });
          },
          error: function (xhr, status, error) {
            alert('Server Error');
            console.error('Error', error);
          }
        });
      }

      listPosts(); // Call listPosts when the page loads

    })
  </script>
</head>

<body>

</body>

</html>
